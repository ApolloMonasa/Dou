# NeoDou - 斗地主残局求解器

NeoDou 是一个基于 C++ 开发的斗地主残局分析与求解工具。它能够读取双方的手牌，构建博弈树，并提供交互式的界面来模拟出牌过程，帮助用户寻找最优解。

## ✨ 功能特性

- **牌型支持**：支持单张、对子、连对、三带一/二、顺子、炸弹、王炸等常见斗地主牌型。
- **残局分析**：通过构建博弈树（Game Tree）分析双方胜负情况。
- **交互式推演**：提供命令行交互界面，用户可以手动选择出牌，系统会自动应对。
- **胜负判定**：自动判定当前局面的胜负状态。

## 🛠️ 编译与运行

本项目使用 `Make` 进行构建，依赖 `g++` 编译器（需支持 C++11）。

### 编译
在项目根目录下运行：
```bash
make
```
编译成功后，可执行文件将生成在 `bin/dou.exe`。

### 运行
```bash
make run
# 或者直接运行
./bin/dou.exe
```

### 清理
```bash
make clean
```

## 📝 输入格式

程序默认读取根目录下的 `input.txt` 文件。
- 文件包含两行数据，分别代表 **我方（先手）** 和 **对手** 的手牌。
- 每张牌用一个数字表示，数字之间用空格分隔。
- 每行以 `0` 结束。

### 牌值映射
| 数字 | 扑克牌 |
| :--- | :--- |
| 3-10 | 3-10 |
| 11 | J (Jack) |
| 12 | Q (Queen) |
| 13 | K (King) |
| 14 | A (Ace) |
| 15 | 2 |
| 16 | 小王 (Small Joker) |
| 17 | 大王 (Big Joker) |

### 示例
```text
3 3 4 4 5 5 0   <-- 我方手牌：对3、对4、对5
6 0             <-- 对手手牌：单6
```

## 🎮 使用说明

程序启动后会进行局势分析，然后进入交互模式：

1. **界面显示**：
   - `-->` 指示当前轮到哪一方出牌。
   - `[ -1] : back`：悔棋/返回上一层。
   - `[ 0], [ 1]...`：当前可出的牌型选项。

2. **操作方式**：
   - 输入对应选项的 **编号**（如 `0`）并回车，即可打出该牌。
   - 输入 `-1` 可以悔棋，回到上一步。

3. **胜负提示**：
   - 当我方手牌出完时，程序会提示 `A Wins!` 并结束（需最新版本）。

## 📂 项目结构

```
NeoDou/
├── bin/            # 存放编译后的可执行文件
├── include/        # 头文件
│   ├── pai.h       # 牌型定义
│   └── tree.h      # 博弈树定义
├── src/            # 源代码
│   ├── pai.cc      # 牌型实现
│   └── tree.cc     # 博弈树实现
├── main.cpp        # 主程序入口
├── makefile        # 构建脚本
├── input.txt       # 输入数据文件
└── README.md       # 项目说明文档
```
